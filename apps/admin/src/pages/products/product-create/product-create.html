<app-blank [pageTitle]="cardTitle()" [breadcrumbs]="breadcrumbs()">
</app-blank>

<div class="row">
    <div class="col-md-4 col-12">
        <div class="card shadow-sm" style="overflow: visible;"> <div class="card-header">
                <h4 class="card-title">{{cardTitle()}}</h4>
            </div>
            <div class="card-body" style="overflow: visible;">
                <form #form="ngForm" autocomplete="off" (ngSubmit)="save(form)">
                    
                    <div class="form-group mb-3" style="position: relative; z-index: 10;">
                        <label for="categoryId">Kategori</label>
                        <flexi-select 
                            id="categoryId"
                            [data]="categories()" 
                            label="name" 
                            value="id" 
                            [(ngModel)]="data().categoryId" 
                            name="categoryId" 
                            [required]="true" 
                            [loading]="categoryLoading()" 
                            language="tr"
                            placeholder="Kategori Seçiniz"
                            (ngModelChange)="setCategoryName()">
                        </flexi-select>
                    </div>

                    <div class="form-group mb-3">
                        <label for="name">Ürün Adı</label>
                        <input type="text" id="name" name="name" class="form-control" 
                               [(ngModel)]="data().name" required placeholder="Ürün adını giriniz">
                    </div>

                    <div class="form-group mb-3">
                        <label for="imageUrl">Ürün Resmi (URL)</label>
                        <input type="text" id="imageUrl" name="imageUrl" class="form-control" 
                               [(ngModel)]="data().imageUrl" required placeholder="https://...">
                    </div>

                    <div class="row">
                        <div class="col-6">
                            <div class="form-group mb-3">
                                <label for="unit">Birim Fiyatı</label>
                                <input type="text" id="unit" name="price" class="form-control" 
                                       [(ngModel)]="data().price" mask="separator.2" 
                                       thousandSeparator="." required>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group mb-3">
                                <label for="stock">Stok Adedi</label>
                                <input type="number" id="stock" name="stock" class="form-control" 
                                       [(ngModel)]="data().stock" required min="0">
                            </div>
                        </div>
                    </div>

                    <div class="form-group mt-3 d-flex justify-content-end">
                        <button type="submit" class="btn btn-primary px-4" [disabled]="!form.valid">
                            {{btnName()}}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>